graph TD
init_receiveInput((Alta Agente))
ht_RevisionYAceptacionDLF(Validacion DLF)
ht_ValidarCodigoAgente(Validacion Codigo Agente)
ht_RevisionYAceptacion(Revision y Aceptacion)
obj_Switch_1{"Continuar?"}
obj_PedirTarjeta{"Representante?"}
ws_Generar_Contrato[Generar Contrato]
ws_DatosLDAP[Datos LDAP]
fn_Switch_15((Fin))
obj_Flow_6>Representante Si]
obj_Flow_5>Representante No]
bpel_SolicitudLectoresCDs[Solicitud Lectores]
bpel_Invoke_CrearTarjeta[Crear Tarjeta]
obj_Notificar>Tarjeta terminada]
ht_DatosLiquidacion(Datos Liquidacion)
ht_RecepcionNotificacionDefinitiva(Recepcion Notificacion Definitiva)
ht_ConfirmacionSujetoMercado(Confirmacion Sujeto Mercado)
ht_RecepcionContratoAdhesion(Recepcion Contrato Adhesion)
obj_AsignarSalida>Agente Operativo]
fn_callbackClient((Fin))

init_receiveInput-->ht_RevisionYAceptacionDLF
init_receiveInput-->ht_ValidarCodigoAgente
init_receiveInput-->ht_RevisionYAceptacion
ht_RevisionYAceptacionDLF-->|--|obj_Switch_1
ht_ValidarCodigoAgente-->|--|obj_Switch_1
ht_RevisionYAceptacion-->|--|obj_Switch_1
obj_Switch_1-->|RECHAZAR|fn_Switch_15
obj_Switch_1-->|ACEPTAR|ws_Generar_Contrato
ws_Generar_Contrato-->ws_DatosLDAP
ws_DatosLDAP-->obj_PedirTarjeta
obj_PedirTarjeta-->obj_Flow_6
obj_PedirTarjeta-->obj_Flow_5
obj_Flow_6-->bpel_SolicitudLectoresCDs
obj_Flow_6-->bpel_Invoke_CrearTarjeta
obj_Flow_5-->bpel_SolicitudLectoresCDs
obj_Flow_5-->bpel_Invoke_CrearTarjeta
bpel_SolicitudLectoresCDs-->obj_Notificar
bpel_Invoke_CrearTarjeta-->obj_Notificar
obj_Notificar-->ht_DatosLiquidacion
obj_Notificar-->ht_RecepcionNotificacionDefinitiva
obj_Notificar-->ht_ConfirmacionSujetoMercado
obj_Notificar-->ht_RecepcionContratoAdhesion
ht_DatosLiquidacion-->|--|obj_AsignarSalida
ht_RecepcionNotificacionDefinitiva-->|--|obj_AsignarSalida
ht_ConfirmacionSujetoMercado-->|--|obj_AsignarSalida
ht_RecepcionContratoAdhesion-->|--|obj_AsignarSalida
obj_AsignarSalida-->|OK|fn_callbackClient

classDef ht fill:#A8CB6A,stroke:#333;
classDef ws fill:#6EABD0,stroke:#333;
classDef obj fill:#D4D4D4,stroke:#333;
classDef obj_info fill:#FFCE44,stroke:#333;
classDef htError fill:#A8CB6A,stroke:#FF0000,stroke-width:3px;
classDef wsError fill:#6EABD0,stroke:#FF0000,stroke-width:3px;

class obj_Flow_6,obj_Flow_5,obj_Notificar,obj_AsignarSalida obj_info;
class obj_Switch_1,obj_PedirTarjeta obj;

linkStyle 0 stroke-width:2px,fill:none,stroke:green;